<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>wsl安装踩坑记录 | Peony</title><meta name="author" content="Peony"><meta name="copyright" content="Peony"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本文记录了作者在安装wsl时面临的问题以及解决方案，主要包含了对wsl的安装、配置子系统代理、更改默认用户、安装Win-kex、配置对应Windows terminal窗口、开启 systemctl 的处理方法。">
<meta property="og:type" content="article">
<meta property="og:title" content="wsl安装踩坑记录">
<meta property="og:url" content="https://peonycsa.com/2023/04/10/wsl%E5%AE%89%E8%A3%85%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/index.html">
<meta property="og:site_name" content="Peony">
<meta property="og:description" content="本文记录了作者在安装wsl时面临的问题以及解决方案，主要包含了对wsl的安装、配置子系统代理、更改默认用户、安装Win-kex、配置对应Windows terminal窗口、开启 systemctl 的处理方法。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic.imgdb.cn/item/647c13acf024cca173275319.png">
<meta property="article:published_time" content="2023-04-10T14:04:10.000Z">
<meta property="article:modified_time" content="2024-01-30T08:49:51.844Z">
<meta property="article:author" content="Peony">
<meta property="article:tag" content="wsl">
<meta property="article:tag" content="工具">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.imgdb.cn/item/647c13acf024cca173275319.png"><link rel="shortcut icon" href="https://pic.imgdb.cn/item/647c139af024cca1732734de.png"><link rel="canonical" href="https://peonycsa.com/2023/04/10/wsl%E5%AE%89%E8%A3%85%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://fastly.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://fastly.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'wsl安装踩坑记录',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-01-30 16:49:51'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://pic.imgdb.cn/item/647c139af024cca1732734de.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">38</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">13</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 杂项</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/life/"><i class="fa-fw fas fa-music"></i><span> 生活</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movie/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://pic.imgdb.cn/item/647c13acf024cca173275319.png')"><nav id="nav"><span id="blog-info"><a href="/" title="Peony"><span class="site-name">Peony</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 杂项</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/life/"><i class="fa-fw fas fa-music"></i><span> 生活</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movie/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">wsl安装踩坑记录</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-04-10T14:04:10.000Z" title="发表于 2023-04-10 22:04:10">2023-04-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T08:49:51.844Z" title="更新于 2024-01-30 16:49:51">2024-01-30</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">2.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>9分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="WSL-安装"><a href="#WSL-安装" class="headerlink" title="WSL 安装"></a>WSL 安装</h2><p>启用 Windows 子系統 Linux 版:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart</span><br></pre></td></tr></table></figure>

<p>启用虚拟化：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart</span><br></pre></td></tr></table></figure>

<p>设置wsl2为默认版本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --set-default-version 2</span><br></pre></td></tr></table></figure>

<h2 id="WSL-更改安装位置"><a href="#WSL-更改安装位置" class="headerlink" title="WSL 更改安装位置"></a>WSL 更改安装位置</h2><p>首先，查看已安装的子系统版本:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl -l -v</span><br></pre></td></tr></table></figure>

<p>然后，将想要更改目录的子系统指定位置，导出为tar文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --<span class="built_in">export</span> &lt;Distro&gt; &lt;FileName&gt; [Options]</span><br></pre></td></tr></table></figure>

<p>其中，<code>&lt;Distro&gt;</code> 为需要导出的镜像，<code>&lt;FileName&gt;</code> 是导出的路径和 tar 文件名称，具体例子如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --<span class="built_in">export</span> kali-linux F:\kali.tar</span><br></pre></td></tr></table></figure>

<p>接着注销当前分发版，也就是卸载现在安装的 Linux 子系统：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --unregister kali-linux</span><br></pre></td></tr></table></figure>

<p>最后，重新导入并安装子系统到新的目录，例如</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --import kali-linux F:\tools\wsl F:\tools\wsl\kali.tar --version 2</span><br></pre></td></tr></table></figure>

<p>删除已导出的tar文件（可选，也可保存压缩包为镜像）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">del kali.tar</span><br></pre></td></tr></table></figure>

<h2 id="WSL-配置子系统代理"><a href="#WSL-配置子系统代理" class="headerlink" title="WSL 配置子系统代理"></a>WSL 配置子系统代理</h2><h3 id="设置ALL-PROXY环境变量"><a href="#设置ALL-PROXY环境变量" class="headerlink" title="设置ALL_PROXY环境变量"></a>设置ALL_PROXY环境变量</h3><p>我尝试了网上两种常用的配置方法，但都无法在我的机器上实现，不得已使用 <code>proxychains</code> 来完成代理：</p>
<ol>
<li><p><del>通过查找 Linux 子系统的 IP 地址，配置代理地址，同时打开 Windows 防火墙是代理流量通过；</del><sup><a href="#%E9%80%9A%E8%BF%87%E5%AD%90%E7%B3%BB%E7%BB%9FIP%E8%BF%9B%E8%A1%8C%E4%BB%A3%E7%90%86">①</a></sup></p>
</li>
<li><p><del>直接配置 Windows 的 IP 地址进行代理；</del><sup>[②](#通过Windows IP 进行代理)</sup></p>
</li>
<li><p>直接下载 <code>proxychains</code> 对命令行进行代理</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -y proxychains</span><br></pre></td></tr></table></figure>

<p>然后配置 <code>proxychains4.conf</code> 文件，根据安装位置不同，可能在 <code>/etc/proxychains4.conf</code> 处或者 <code>/usr/local/etc/proxychains4.conf</code> 处，修改代理为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ProxyList]</span><br><span class="line"># add proxy here ...</span><br><span class="line"># meanwile</span><br><span class="line"># defaults set to &quot;tor&quot;</span><br><span class="line">socks4 &lt;Windows IP&gt; &lt;Port&gt;</span><br></pre></td></tr></table></figure>

<p><code>&lt;Windows IP&gt;</code> 是对应的 Windows IP ，如 <code>192.168.0.xxx</code> 等， <code>&lt;Port&gt;</code> 是代理端口。</p>
<p>前两种方法的踩坑记录保存在隐藏框中。</p>
<h2 id="WSL-更改默认登录账户"><a href="#WSL-更改默认登录账户" class="headerlink" title="WSL 更改默认登录账户"></a>WSL 更改默认登录账户</h2><p>wsl 默认是通过 root 账户登录的，出于安全考虑，希望能更换成常规账户登录.</p>
<p>通过 <code>&lt;distro name&gt;.exe config --default-user [new default user]</code> 命令，其中 <code>&lt;distro name&gt;.exe</code> 是需要更换用户的WSL发行版的可执行文件， <code>[new default user]</code> 是需要切换的用户。例如，安装了 Ubuntu 20.04 需要切换默认用户为 <code>peony</code> ，运行 <code>ubuntu2004.exe config --default-user peony</code> 即可。</p>
<h2 id="Win-Kex-SL模式踩坑"><a href="#Win-Kex-SL模式踩坑" class="headerlink" title="Win-Kex SL模式踩坑"></a>Win-Kex SL模式踩坑</h2><h3 id="安装VcXsrv"><a href="#安装VcXsrv" class="headerlink" title="安装VcXsrv"></a>安装VcXsrv</h3><p>根据官方文档提到的依赖（ Prerequisites ）：</p>
<blockquote>
<p>Prerequisites</p>
<ul>
<li><p>VcXsrv requires<a target="_blank" rel="noopener" href="https://www.microsoft.com/en-US/download/details.aspx?id=48145"> Visual C++ Redistributable for Visual Studio 2015</a> (vcredist140)</p>
</li>
<li><p>It should be included in standard Windows installations but if you receive an error complaining that it is missing, just download and install it </p>
</li>
<li><p>(Optional, but recommended) <a target="_blank" rel="noopener" href="https://sourceforge.net/p/vcxsrv/wiki/VcXsrv%20%26%20Win10/">VcXsrv running directly on the host</a></p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://github.com/microsoft/WSL/issues/4106#issuecomment-502920377">Setup VcXsrv</a></p>
</li>
<li><p>Start -&gt; Settings -&gt; Update &amp; Security -&gt; Windows Security -&gt; Open Windows Security Firewall &amp; network projection -&gt; Allow an app through the firewall -&gt; Change settings -&gt; Select both entries of “VcXsrv windows server” -&gt; OK</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://x410.dev/cookbook/wsl/protecting-x410-public-access-for-wsl2-via-windows-defender-firewall/">Add inbound firewall rules to project the X server</a></p>
</li>
</ul>
</li>
</ul>
</blockquote>
<p>首先需要安装 VcXsrv 软件：</p>
<blockquote>
<p>VcXsrv 是一个 Windows 上的 X 服务器软件，用于在 Windows 操作系统上运行和显示X窗口系统的图形界面应用程序。X窗口系统是一种用于在网络环境下实现图形用户界面的开放标准。</p>
<p>VcXsrv 允许用户在 Windows 主机上通过 X 协议与远程 Linux 或 Unix 服务器进行通信，并在 Windows 桌面上显示 Linux 或 Unix 应用程序的图形界面。它提供了一个 X 服务器实现，可以接收来自远程服务器的图形输出并将其渲染到 Windows 的桌面上。这样，用户可以在 Windows 系统中同时运行和访问 Linux 或 Unix 应用程序，无需在本地安装这些应用程序。</p>
<p>VcXsrv 具有配置灵活、性能良好以及与多个窗口管理器和桌面环境的兼容性等特点。它提供了一种方便的方式，使用户能够在 Windows 系统中享受到来自 Linux 或 Unix 系统的图形界面应用程序的便利。</p>
<p>VcXsrv 在 Windows 平台上广泛用于开发者、系统管理员和使用 Linux 或 Unix 应用程序的用户之间的远程图形界面访问和交互。</p>
</blockquote>
<p>安装步骤选择如下：</p>
<p><img src="https://pic.imgdb.cn/item/647d49ec1ddac507cc33b83c.png" alt="step1"></p>
<p><img src="https://pic.imgdb.cn/item/647d49ed1ddac507cc33b995.png" alt="step2"></p>
<p><img src="https://pic.imgdb.cn/item/647d49ec1ddac507cc33b83c.png" alt="step3"></p>
<h3 id="VcXsrv-防火墙配置"><a href="#VcXsrv-防火墙配置" class="headerlink" title="VcXsrv 防火墙配置"></a>VcXsrv 防火墙配置</h3><p>成功打开 VcXsrv 后，需要配置防火墙策略，在公用网络和私人网络上都允许进出：</p>
<p><img src="https://pic.imgdb.cn/item/647d4a411ddac507cc342dc6.jpg" alt="Firewall1"></p>
<p>如果不小心按错了，可以在 Windows Defender 防火墙-&gt;入站规则中重新配置</p>
<p><img src="https://pic.imgdb.cn/item/647d498d1ddac507cc332b8f.jpg" alt="firewall2"></p>
<h3 id="使用-Win-Kex-SL模式"><a href="#使用-Win-Kex-SL模式" class="headerlink" title="使用 Win-Kex SL模式"></a>使用 Win-Kex SL模式</h3><p>前提条件：正常运行 VcXsrv</p>
<p>运行方式：</p>
<ul>
<li>通过普通用户运行命令 <code>kex --sl</code> 即可使用 Win-Kex Seamless Mode </li>
<li>在 Windows Terminal 配置文件（ <code>setting.json</code> ）<code>profile</code> 项中，进行如下配置<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;guid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;55ca431a-3a87-5fb3-83cd-11ececc031d2&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;hidden&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Win-KeX&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;commandline&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wsl -d kali-linux kex --sl --wtstart -s&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="WSL-中远程连接服务器"><a href="#WSL-中远程连接服务器" class="headerlink" title="WSL 中远程连接服务器"></a>WSL 中远程连接服务器</h2><p>无需再另外使用 XShell 或者 terminal 等ssh管理工具了，直接使用下面命令进行对远程设备进行操作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh &lt;user&gt;@&lt;IP&gt;:&lt;Port&gt;       # ssh连接</span><br><span class="line">scp &lt;user&gt;@&lt;IP&gt;              # scp文件管理</span><br><span class="line">sftp &lt;user&gt;@&lt;IP&gt;             # sftp文件管理</span><br></pre></td></tr></table></figure>

<p>如果需要持久化管理，还可以打开 wsl 的 <code>settings.json</code> 在 <code>profile</code> 项中进行配置。</p>
<h2 id="WSL-开启-systemctl"><a href="#WSL-开启-systemctl" class="headerlink" title="WSL 开启 systemctl"></a>WSL 开启 <code>systemctl</code></h2><blockquote>
<p>Supporting systemd required changes to the WSL architecture. As systemd requires PID 1, the WSL init process started within the Linux distribution becomes a child process of the systemd. Because the WSL init process is responsible for providing the infrastructure for communication between the Linux and Windows components, changing this hierarchy required rethinking some of the assumptions made with the WSL init process. Additional modifications had to be made to ensure a clean shutdown (as that shutdown is controlled by systemd now) and to have compatibility with WSLg, It is also important to note that with these change, systemd services will NOT keep your WSL instance alive. Your WSL instance will stay alive in the same way it did before, which you can <a target="_blank" rel="noopener" href="https://devblogs.microsoft.com/commandline/background-task-support-in-wsl/">read more about here</a>.</p>
</blockquote>
<p>上文是微软更新公告中对于宣布了 WSL 支持 <code>systemd</code> ，只需要按照如下操作即可开启 WSL 的 <code>systemd</code> ——编辑 <code>/etc/wsl.conf</code> 文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[boot]</span><br><span class="line">systemd=true</span><br></pre></td></tr></table></figure>

<p>保存之后，使用 <code>wsl.exe --shutdown</code> 关闭 WSL 系统，通过在 Linux 子系统中运行下面的命令可以验证 <code>systemd</code> 是否正常运行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-unit-files</span><br></pre></td></tr></table></figure>

<p>正常的结果如下：</p>
<p><img src="https://pic.imgdb.cn/item/64c72de31ddac507cc0b2bcf.jpg" alt="systemctl结果"></p>
<h2 id="失败尝试"><a href="#失败尝试" class="headerlink" title="失败尝试"></a>失败尝试</h2><h3 id="通过子系统IP进行代理"><a href="#通过子系统IP进行代理" class="headerlink" title="通过子系统IP进行代理"></a>通过子系统IP进行代理</h3><p>首先，找到 Linux 子系统的 IP 地址，可以查看 DNS 服务器动态分配给子系统的 IP ：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/resolv.conf</span><br></pre></td></tr></table></figure>

<p>然后，将子系统的 IP 和代理客户端的端口（例如9000）组合成一个代理地址，例如 <code>http://172.19.80.1:9000</code> ；</p>
<p>接着，将代理地址设置为ALL_PROXY环境变量，</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ALL_PROXY=<span class="string">&quot;http://172.19.80.1:9000&quot;</span></span><br></pre></td></tr></table></figure>

<p>最后，确保 Windows 上的代理客户端允许来自本地局域网的请求。我使用的 <mark class="hl-label for">Clash</mark> ，可以看到已经开启了允许局域网的选项。</p>
<p><img src="https://pic.imgdb.cn/item/647c13a4f024cca173274341.png" alt="允许局域网选项"></p>
<p>如果需要开机自启动，可以使用下面的脚本 <code>.proxyrc</code> ：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A script to enable, disable and test proxy for WSL subsystem</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Usage: source /$PATH/.proxyrc [option]</span></span><br><span class="line"><span class="comment"># Options:</span></span><br><span class="line"><span class="comment"># -e: enable proxy</span></span><br><span class="line"><span class="comment"># -d: disable proxy</span></span><br><span class="line"><span class="comment"># -t: test proxy</span></span><br><span class="line"><span class="comment"># -h: show usage information</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Proxy settings</span></span><br><span class="line">PROXY_HOST=$(<span class="built_in">cat</span> /etc/resolv.conf |grep <span class="string">&quot;nameserver&quot;</span> |<span class="built_in">cut</span> -f 2 -d <span class="string">&quot; &quot;</span>)</span><br><span class="line">PROXY_PORT=<span class="string">&quot;9000&quot;</span></span><br><span class="line">PROXY_TYPE=<span class="string">&quot;socks5&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable proxy function</span></span><br><span class="line"><span class="function"><span class="title">enable_proxy</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Enabling proxy for WSL subsystem...&quot;</span></span><br><span class="line">  <span class="built_in">export</span> http_proxy=<span class="string">&quot;<span class="variable">$PROXY_TYPE</span>://<span class="variable">$PROXY_HOST</span>:<span class="variable">$PROXY_PORT</span>&quot;</span></span><br><span class="line">  <span class="built_in">export</span> https_proxy=<span class="string">&quot;<span class="variable">$http_proxy</span>&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Proxy enabled.&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable proxy function</span></span><br><span class="line"><span class="function"><span class="title">disable_proxy</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Disabling proxy for WSL subsystem...&quot;</span></span><br><span class="line">  <span class="built_in">unset</span> http_proxy</span><br><span class="line">  <span class="built_in">unset</span> https_proxy</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Proxy disabled.&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Test proxy function</span></span><br><span class="line"><span class="function"><span class="title">test_proxy</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Testing proxy for WSL subsystem...&quot;</span></span><br><span class="line">  resp=$(curl --conecet-timeout 5 -m 5 -w <span class="string">&quot;%&#123;http_code&#125;&quot;</span> -o <span class="variable">$tempfile</span> http://www.google.com )</span><br><span class="line">  <span class="comment"># if [ $&#123;resp&#125; = 200 ]; then</span></span><br><span class="line">  <span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Proxy is working.&quot;</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Proxy is not working, return value is $?&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Response content:&quot;</span></span><br><span class="line">    <span class="built_in">cat</span> <span class="variable">$tempfile</span></span><br><span class="line">    <span class="built_in">rm</span> -f <span class="variable">$tempfile</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Show usage information function</span></span><br><span class="line"><span class="function"><span class="title">show_usage</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Usage: source .proxyrc [option]&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Options:&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;-e: enable proxy&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;-d: disable proxy&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;-t: test proxy&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;-h: show usage information&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Main logic</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">  -e)</span><br><span class="line">    enable_proxy</span><br><span class="line">    ;;</span><br><span class="line">  -d)</span><br><span class="line">    disable_proxy</span><br><span class="line">    ;;</span><br><span class="line">  -t)</span><br><span class="line">    test_proxy</span><br><span class="line">    ;;</span><br><span class="line">  -h)</span><br><span class="line">    show_usage</span><br><span class="line">    ;;</span><br><span class="line">  *)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Invalid option: <span class="variable">$1</span>&quot;</span></span><br><span class="line">    show_usage</span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<h3 id="通过Windows-IP-进行代理"><a href="#通过Windows-IP-进行代理" class="headerlink" title="通过Windows IP 进行代理"></a>通过Windows IP 进行代理</h3><p>莫名其妙用 DNS 服务器动态分配 IP 无法代理，但是直接用 Windows 的 IP 做代理却能成功转发，因此直接编写脚本 <code>.proxyrc</code> 如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ALL_PROXY=<span class="string">&quot;socks5://&lt;Windows IP&gt;:&lt;Port&gt;&quot;</span></span><br></pre></td></tr></table></figure>

<p>其中， <code>&lt;Windows IP&gt;</code> 是对应的 Windows IP ，如 <code>192.168.0.xxx</code> 等， <code>&lt;Port&gt;</code> 是代理端口。</p>
<p>然后将脚本的路径添加到 <code>~/.bashrc</code> 或者 <code>~/.zshrc</code> 文件中，这样每次登录 WSL 子系统时，就会自动执行脚本。例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;source /path/to/.proxyrc -e&quot;</span> &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>

<p>其中 <code>/path/to/</code> 是一个占位符，表示要指定的文件或目录的路径，需要把 <code>/path/to/</code> 替换成 <code>.proxyrc</code> 文件所在的路径，比如 <code>/home/user/.proxyrc</code> 。这样，每次每次登录 WSL 子系统时，就会自动执行 <code>.proxyrc</code> 文件中的命令，开启代理。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://peonycsa.com">Peony</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://peonycsa.com/2023/04/10/wsl%E5%AE%89%E8%A3%85%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/">https://peonycsa.com/2023/04/10/wsl%E5%AE%89%E8%A3%85%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://peonycsa.com" target="_blank">Peony</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/wsl/">wsl</a><a class="post-meta__tags" href="/tags/%E5%B7%A5%E5%85%B7/">工具</a></div><div class="post_share"><div class="social-share" data-image="https://pic.imgdb.cn/item/647c13acf024cca173275319.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://fastly.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/04/11/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E7%BB%8F%E4%B8%80%E4%BA%8C%E4%B8%89/" title="渗透测试面经一二三"><img class="cover" src="https://pic.imgdb.cn/item/647dce111ddac507ccf6ce12.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">渗透测试面经一二三</div></div></a></div><div class="next-post pull-right"><a href="/2023/04/08/web%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/" title="web刷题记录"><img class="cover" src="https://pic.imgdb.cn/item/647dcd821ddac507ccf5ba20.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">web刷题记录</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://pic.imgdb.cn/item/647c139af024cca1732734de.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Peony</div><div class="author-info__description">知道自己需要的是什么之后，真正的学习才算开始。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">38</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">13</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Catsofsuffering"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Catsofsuffering" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:graywar1@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#WSL-%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">WSL 安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WSL-%E6%9B%B4%E6%94%B9%E5%AE%89%E8%A3%85%E4%BD%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">WSL 更改安装位置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WSL-%E9%85%8D%E7%BD%AE%E5%AD%90%E7%B3%BB%E7%BB%9F%E4%BB%A3%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">WSL 配置子系统代理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AEALL-PROXY%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">3.1.</span> <span class="toc-text">设置ALL_PROXY环境变量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WSL-%E6%9B%B4%E6%94%B9%E9%BB%98%E8%AE%A4%E7%99%BB%E5%BD%95%E8%B4%A6%E6%88%B7"><span class="toc-number">4.</span> <span class="toc-text">WSL 更改默认登录账户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Win-Kex-SL%E6%A8%A1%E5%BC%8F%E8%B8%A9%E5%9D%91"><span class="toc-number">5.</span> <span class="toc-text">Win-Kex SL模式踩坑</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85VcXsrv"><span class="toc-number">5.1.</span> <span class="toc-text">安装VcXsrv</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VcXsrv-%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE"><span class="toc-number">5.2.</span> <span class="toc-text">VcXsrv 防火墙配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Win-Kex-SL%E6%A8%A1%E5%BC%8F"><span class="toc-number">5.3.</span> <span class="toc-text">使用 Win-Kex SL模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WSL-%E4%B8%AD%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">6.</span> <span class="toc-text">WSL 中远程连接服务器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WSL-%E5%BC%80%E5%90%AF-systemctl"><span class="toc-number">7.</span> <span class="toc-text">WSL 开启 systemctl</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%B1%E8%B4%A5%E5%B0%9D%E8%AF%95"><span class="toc-number">8.</span> <span class="toc-text">失败尝试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E5%AD%90%E7%B3%BB%E7%BB%9FIP%E8%BF%9B%E8%A1%8C%E4%BB%A3%E7%90%86"><span class="toc-number">8.1.</span> <span class="toc-text">通过子系统IP进行代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87Windows-IP-%E8%BF%9B%E8%A1%8C%E4%BB%A3%E7%90%86"><span class="toc-number">8.2.</span> <span class="toc-text">通过Windows IP 进行代理</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/10/20/%E4%BB%A3%E7%90%86%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/" title="代理相关知识总结"><img src="https://pic.imgdb.cn/item/6714a9f0d29ded1a8c6166d4.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="代理相关知识总结"/></a><div class="content"><a class="title" href="/2024/10/20/%E4%BB%A3%E7%90%86%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/" title="代理相关知识总结">代理相关知识总结</a><time datetime="2024-10-20T06:51:44.203Z" title="发表于 2024-10-20 14:51:44">2024-10-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/13/SQLi%E5%B0%8F%E6%8A%80%E5%B7%A7/" title="SQLi小技巧"><img src="https://pic.imgdb.cn/item/66fe2fc70a206445e3a88ab1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SQLi小技巧"/></a><div class="content"><a class="title" href="/2024/10/13/SQLi%E5%B0%8F%E6%8A%80%E5%B7%A7/" title="SQLi小技巧">SQLi小技巧</a><time datetime="2024-10-13T07:34:35.000Z" title="发表于 2024-10-13 15:34:35">2024-10-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/29/localhost%E7%BB%95%E8%BF%87%E6%96%B9%E6%B3%95/" title="localhost绕过方法"><img src="https://pic.imgdb.cn/item/66fe303a0a206445e3a8edf7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="localhost绕过方法"/></a><div class="content"><a class="title" href="/2024/09/29/localhost%E7%BB%95%E8%BF%87%E6%96%B9%E6%B3%95/" title="localhost绕过方法">localhost绕过方法</a><time datetime="2024-09-29T07:25:13.957Z" title="发表于 2024-09-29 15:25:13">2024-09-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/29/%E7%BB%88%E7%AB%AF%E5%8D%87%E7%BA%A7%E4%B8%8E%E6%8F%90%E9%AB%98%E7%A8%B3%E5%AE%9A%E6%80%A7/" title="终端升级与提高稳定性"><img src="https://pic.imgdb.cn/item/65b76b5d871b83018ab4a506.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="终端升级与提高稳定性"/></a><div class="content"><a class="title" href="/2024/01/29/%E7%BB%88%E7%AB%AF%E5%8D%87%E7%BA%A7%E4%B8%8E%E6%8F%90%E9%AB%98%E7%A8%B3%E5%AE%9A%E6%80%A7/" title="终端升级与提高稳定性">终端升级与提高稳定性</a><time datetime="2024-01-29T09:01:35.000Z" title="发表于 2024-01-29 17:01:35">2024-01-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/18/Splunk%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A8%81%E8%83%81%E6%83%85%E6%8A%A5%E5%91%BD%E4%BB%A4/" title="Splunk自定义威胁情报命令"><img src="https://pic.imgdb.cn/item/65b860e0871b83018a7e5d20.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Splunk自定义威胁情报命令"/></a><div class="content"><a class="title" href="/2024/01/18/Splunk%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A8%81%E8%83%81%E6%83%85%E6%8A%A5%E5%91%BD%E4%BB%A4/" title="Splunk自定义威胁情报命令">Splunk自定义威胁情报命令</a><time datetime="2024-01-18T07:34:35.000Z" title="发表于 2024-01-18 15:34:35">2024-01-18</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://pic.imgdb.cn/item/647c13acf024cca173275319.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Peony</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://fastly.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><div class="js-pjax"></div></div></body></html>