---
title: 内网渗透测试基础
date: 2023-04-16 19:48:46
tags:
  - 内网渗透
categories: 内网渗透
keywords: 内网渗透
description: 本文记录了作者在学习内网渗透知识中面临的问题以及解决方案
top_img: https://pic.imgdb.cn/item/647dce641ddac507ccf78b14.jpg
cover: https://pic.imgdb.cn/item/647dce641ddac507ccf78b14.jpg
password: xdxdsqyc15511551
message: 暂未完成，仍在施工
---

## 内网

- 内网是指在某一区域内由多台计算机互联成的网络，也叫局域网（Local Area Network，LAN）。
- 内网一般是封闭型的，不直接与互联网连接，只能在内部进行数据交换和通信。内网的IP地址一般是私有的（Private），也就是不在互联网上注册的地址，比如 10.x.x.x ，172.16.x.x 到 172.31.x.x ，192.168.x.x 等。

外网是指与互联网直接连接的网络，也叫广域网（Wide Area Network，WAN）或公网（Public Network）。外网可以跨越不同地区、城市和国家，提供远程通信和信息共享。外网的IP地址一般是公有的（Public），也就是在互联网上注册的地址，可以被任何人访问。

内网和外网的区别主要有以下几点：

- IP地址的范围不同。内网使用私有IP地址，外网使用公有IP地址。
- 连接方式不同。内网一般使用交换机、路由器等设备进行连接，外网一般使用光纤、卫星等传输介质进行连接。
- 安全性不同。内网相对外网更安全，因为内网不直接暴露在互联网上，不容易受到外部攻击。
- 速度不同。内网相对外网更快，因为内网的数据传输不需要经过多个节点和距离。

如果要从内网访问外网，或者从外网访问内网，就需要进行网络地址转换（Network Address Translation，NAT）。NAT是一种将私有IP地址转换为公有IP地址或反之的技术，可以实现内外网之间的通信。

## 工作组

工作组是一个由多台计算机互联成的小组，用于在局域网中实现资源的共享和协作。工作组的成员可以访问彼此的文件、打印机、应用程序等，也可以进行通信和日程安排。

![工作组示意图](https://raw.githubusercontent.com/Catsofsuffering/PicGoBed/main/D639C2B169C7C67B5E3BE8CFA23DF8C9.png)

工作组的特点有以下几点：

- 工作组是最简单最常见的资源管理模式，不需要专门的服务器或域控制器。
- 工作组的成员一般在同一物理地点，被相同的局域网连接起来。
- 工作组的名称一般反映了它的功能或所属部门，比如“财务组”、“销售组”等。
- 工作组的规模一般不超过20台计算机，否则会影响网络性能和管理效率。

如果要创建或加入一个工作组，需要在计算机的属性中修改计算机名和工作组名，并重启计算机。如果要访问其他工作组的资源，需要在网络邻居中找到对应的工作组名，并输入正确的用户名和密码。

通俗的讲，工作组就是将不同的计算机按功能（或部门）分别列入不同的工作组。例如技术部的计算机都列入“技术部”工作组，行政部的计算机都列入行政部工作组。要想访问某个部门的资源，只要在网络里双击该部门的工作组名就可以看到该部门的所有计算机了。相比较不分组，这样显得有序。

![Windows 工作组管理](https://raw.githubusercontent.com/Catsofsuffering/PicGoBed/main/20230416233146.png)

## 域

假设有一个这样的场景，一个公司有200台计算机，我们希望某台计算机上的Alan账户可以访问每台计算机的资源或者在每台计算机上登录。那么，在工作组环境下，我们必须在这200台计算机各自的SAM数据库中创建Alan这个账户。一旦Alan想要更换密码，必须进行200次更改密码的操作！这就是一个典型的域环境的应用场景

域（Domain）是一个有安全边界的计算机集合（安全边界是指，在两个域中，一个域无法访问另一个域中的资源）。可以简单的把域理解为升级版的工作组。与工作组相比，域的安全管理控制更加严格。用户想要访问域内的资源，必须以合法的身份登录域，而用户对域内的资源拥有什么样的权限，还取决于用户在域内的身份。

域控制器（Domain Controller, DC）是域内一台类似管理服务器的计算机，我们可以形象的将它理解为一个单位的门禁系统。域控制器负责所有连入的计算机和用户的验证工作。域内的计算机如果想互相访问，都要经过域控制器的审核。正是因为域控起到了一个身份验证的作用，因此站在渗透的角度来说，拿下域控是至关重要的。拿下了域控，就相当于拿到了整个域内所有计算机的账号和密码。要想实现一个域环境，必须安装在计算机中安装活动目录（Active Directory）。也就是说内网一台计算机安装了活动目录，那它就变成了域控制器。在域中除了域控制器，还有成员服务器、客户机、独立服务器。